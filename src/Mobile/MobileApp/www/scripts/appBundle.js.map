{"version":3,"file":"appBundle.js","sourceRoot":"","sources":["../../scripts/shared/app.ts","../../scripts/shared/extensions.ts","../../scripts/shared/routes.ts","../../scripts/services/fileService.ts","../../scripts/services/mobileService.ts","../../scripts/services/sharedService.ts","../../scripts/services/signalRService.ts","../../scripts/models/AnalyticsDataModel.ts","../../scripts/models/DeviceModel.ts","../../scripts/models/DevicePropertiesModel.ts","../../scripts/models/ModuleModel.ts","../../scripts/models/RelayModel.ts","../../scripts/models/RuleModel.ts","../../scripts/models/SensorModel.ts","../../scripts/models/SubscriptionModel.ts","../../scripts/models/SubscriptionPropertiesModel.ts","../../scripts/models/TankModel.ts","../../scripts/directives/angular-timer.ts","../../scripts/directives/loading-indicator.ts","../../scripts/directives/menu.ts","../../scripts/controllers/analytics-controller.ts","../../scripts/controllers/control-controller.ts","../../scripts/controllers/live-controller.ts","../../scripts/controllers/login-controller.ts","../../scripts/controllers/main-controller.ts","../../scripts/controllers/settings-controller.ts"],"names":[],"mappings":"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","sourcesContent":["﻿\"use strict\";\r\n\r\nangular.module(\"ngapp\", [\"ui.router\", \"ngMdIcons\", \"ngMaterial\", \"ngCordova\", \"ngCordova.plugins\", \"ngStorage\", \"TimerApp\", \"angular-jwt\"])\r\n\r\n    .run(function ($rootScope: ng.IRootScopeService, $cordovaStatusbar: any, $location: ng.ILocationService, shared: Submerged.Services.IShared) {\r\n\r\n        document.addEventListener(\"deviceready\", onDeviceReady, false);\r\n\r\n        function onDeviceReady() {\r\n            hockeyapp.start(null, null, \"c6076e8da2b24860aed146c667f32fa9\");\r\n\r\n            $cordovaStatusbar.overlaysWebView(false); // Always Show Status Bar\r\n            window.plugins.orientationLock.lock(\"portrait\");\r\n\r\n            //document.addEventListener(\"backbutton\", onBackButton, false);\r\n            document.addEventListener(\"resume\", onResume, false);\r\n        }\r\n\r\n        /* Hijack Android Back Button (You Can Set Different Functions for Each View by Checking the $state.current) */\r\n        function onBackButton() {\r\n            if ($location.path() == '/main') {\r\n                //navigator.app.exitApp();\r\n            } else {\r\n                /*e.preventDefault();*/\r\n            }\r\n        }\r\n\r\n        function onResume() {\r\n            $rootScope.$broadcast('resume', null);\r\n        }\r\n    })\r\n\r\n    .config(function ($mdThemingProvider) {\r\n        $mdThemingProvider.theme('altTheme')\r\n            .primaryPalette('purple');\r\n    });","﻿interface Array<T> {\r\n    select(expr: any): any;\r\n    where(filter: any): any;\r\n    firstOrDefault(func: any); any;\r\n}\r\n\r\nArray.prototype.select = function (expr: any) {\r\n    var arr = this;\r\n    switch (typeof expr) {\r\n        case 'function':\r\n            return jQuery.map(arr, expr);\r\n        case 'string':\r\n            try {\r\n                var func:any = new Function(expr.split('.')[0], 'return ' + expr + ';');\r\n                return jQuery.map(arr, func);\r\n\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n        default:\r\n            throw new ReferenceError('expr not defined or not supported');\r\n    }\r\n};\r\n\r\n\r\nArray.prototype.where = function (filter: any) {\r\n    var collection = this;\r\n    switch (typeof filter) {\r\n        case 'function':\r\n            return jQuery.grep(collection, filter);\r\n        case 'object':\r\n            for (var property in filter) {\r\n                if (!filter.hasOwnProperty(property))\r\n                    continue; // ignore inherited properties\r\n                collection = jQuery.grep(collection, function (item: any) {\r\n                    return item[property] === filter[property];\r\n                });\r\n            }\r\n            return collection.slice(0); // copy the array \r\n        // (in case of empty object filter)\r\n        default:\r\n            throw new TypeError('func must be either a' +\r\n                'function or an object of properties and values to filter by');\r\n    }\r\n};\r\n\r\nArray.prototype.firstOrDefault = function (func: any) {\r\n    return this.where(func)[0] || null;\r\n};","﻿\"use strict\";\r\n\r\nangular.module(\"ngapp\").config([\"$stateProvider\", \"$urlRouterProvider\", function ($stateProvider, $urlRouterProvider) {\r\n\r\n    $urlRouterProvider.otherwise(\"/login\");\r\n\r\n    $stateProvider\r\n\r\n        .state(\"login\", {\r\n            url: \"/login\",\r\n            templateUrl: \"app/views/login.html\",\r\n            title: \"Submerged Login\",\r\n            controller: \"LoginContoller\",\r\n            controllerAs: \"vm\"\r\n        })\r\n\r\n        .state(\"main\", {\r\n            url: \"/main\",\r\n            templateUrl: \"app/views/main.html\",\r\n            title: \"Submerged Mobile\",\r\n            controller: \"MainController\",\r\n            controllerAs: \"vm\"\r\n        })\r\n\r\n        .state(\"live\", {\r\n            url: \"/live\",\r\n            templateUrl: \"app/views/live.html\",\r\n            title: \"Submerged Live\",\r\n            controller: \"LiveController\",\r\n            controllerAs: \"vm\",\r\n        })\r\n\r\n        .state(\"analytics\", {\r\n            url: \"/anaytics\",\r\n            templateUrl: \"app/views/analytics.html\",\r\n            title: \"Submerged Analytics\",\r\n            controller: \"AnalyticsController\",\r\n            controllerAs: \"vm\",\r\n            params: { 'tab': null, 'sensor': null }\r\n        })\r\n\r\n        .state(\"control\", {\r\n            url: \"/control\",\r\n            templateUrl: \"app/views/control.html\",\r\n            title: \"Submerged Control\",\r\n            controller: \"ControlController\",\r\n            controllerAs: \"vm\"\r\n        })\r\n\r\n        .state(\"settings\", {\r\n            url: \"/settings\",\r\n            templateUrl: \"app/views/settings.html\",\r\n            title: \"Submerged Settings\",\r\n            controller: \"SettingsController\",\r\n            controllerAs: \"vm\"\r\n        });\r\n\r\n}]);\r\n","﻿namespace Submerged.Services {\r\n\r\n    export interface IFileService {\r\n        getJsonFile<T>(filename: string, folder: string): ng.IPromise<T>;\r\n        storeJsonFile(filename: string, folder: string, obj: any): void;\r\n    }\r\n\r\n    export class FileService implements IFileService {\r\n\r\n        constructor(private $q: ng.IQService) {\r\n        }\r\n\r\n        getJsonFile(filename: string, folder: string): ng.IPromise<any> {\r\n            var deferred = this.$q.defer();\r\n\r\n            console.log(`Resolving file ${filename} in folder ${folder}`);\r\n            window.resolveLocalFileSystemURL(folder, function (dir: any) {\r\n                dir.getFile(filename, { create: true }, function (fileEntry: any) {\r\n                    // Get a File object representing the file,\r\n                    // then use FileReader to read its contents.\r\n                    fileEntry.file(function (file: any) {\r\n                        var reader = new FileReader();\r\n\r\n                        reader.onloadend = function (e) {\r\n                            if (this.result.length > 0) {\r\n                                var obj = JSON.parse(this.result);\r\n                                deferred.resolve(obj);\r\n                            }\r\n                            else {\r\n                                deferred.resolve(null);\r\n                            }\r\n                        };\r\n\r\n                        reader.readAsText(file);\r\n                    }, function (err: any) {\r\n                        deferred.reject(err);\r\n                    });\r\n\r\n                });\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        storeJsonFile(filename: string, folder: string, obj: any): void {\r\n            var json_data = JSON.stringify(obj);\r\n            console.log(`Resolving file ${filename} in folder ${folder}`);\r\n\r\n            window.resolveLocalFileSystemURL(folder, function (dir: any) {\r\n                dir.getFile(filename, { create: true }, function (fileEntry: any) {\r\n                    // Create a FileWriter object for our FileEntry (log.txt).\r\n                    fileEntry.createWriter(function (fileWriter: any) {\r\n\r\n                        fileWriter.onwriteend = function (e: any) {\r\n\r\n                        };\r\n\r\n                        fileWriter.onerror = function (e: any) {\r\n                            console.log(`Failed saving file ${filename}`);\r\n                        };\r\n\r\n                        // Create a new Blob and write it to log.txt.\r\n                        var blob = new Blob([json_data], { type: 'text/plain' });\r\n\r\n                        fileWriter.write(blob);\r\n\r\n                    }, function (err: any) {\r\n                        console.log(`Failed saving file ${filename}`);\r\n                    });\r\n\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    angular.module(\"ngapp\").service('fileService', FileService);\r\n}","﻿declare namespace Microsoft.WindowsAzure {\r\n\r\n    // MobileServiceClient object based on Microsoft Azure documentation: http://msdn.microsoft.com/en-us/library/windowsazure/jj554219.aspx\r\n    interface MobileServiceClient {\r\n        new (applicationUrl: string): MobileServiceClient;\r\n        push: any;\r\n    }\r\n\r\n    interface User {\r\n        mobileServiceAuthenticationToken: any;\r\n    }\r\n}\r\n\r\nnamespace Submerged.Services {\r\n\r\n    export interface IApiCallback { (error: any, success: any): void }\r\n\r\n    export interface IMobileService {\r\n        login(force?: boolean): ng.IPromise<{}>;\r\n        registerPush(): void;\r\n        unregisterPush(): void;\r\n        invokeApi(apiName: string, options: {}, callback: IApiCallback),\r\n        getHeaders(): ng.IPromise<any[]>;\r\n    }\r\n\r\n    export class MobileService implements IMobileService {\r\n        mobileServiceClient: Microsoft.WindowsAzure.MobileServiceClient;\r\n        pushRegistration: PhonegapPluginPush.PushNotification = null;\r\n        registrationId: string = null;\r\n        private loggingInPromise: ng.IPromise<{}>;\r\n\r\n        private file: string = \"authtoken.json\";\r\n        private folder: string;                     // initialized during init()\r\n\r\n        constructor(private shared: IShared, private fileService: IFileService, private $q: ng.IQService, private jwtHelper: ng.jwt.IJwtHelper) {\r\n            this.mobileServiceClient = new WindowsAzure.MobileServiceClient(this.shared.settings.apiInfo.apiUrl);\r\n            this.init();\r\n        }\r\n\r\n        init(): void {\r\n            console.log(\"Initializing mobileService for communication with Azure\");\r\n            this.folder = window.cordova.file.applicationStorageDirectory;\r\n\r\n            console.log(\"Initializing user data from storage.\");\r\n            this.fileService.getJsonFile<any>(this.file, this.folder).then(function (contents) {\r\n                if (contents != null) {\r\n                    console.log(\"Found stored auth token info, applying it to service client.\");\r\n                    this.mobileServiceClient.currentUser = {\r\n                        userId: contents.userId,\r\n                        mobileServiceAuthenticationToken: contents.token\r\n                    }\r\n                }\r\n            }.bind(this), function (err) {\r\n                console.log(\"Failure loading authtoken.json\");\r\n            });\r\n        }\r\n\r\n        saveAuthInfo(): void {\r\n            console.log(\"mobileService.saveAuthInfo\");\r\n            var authInfo = {\r\n                token: this.mobileServiceClient.currentUser.mobileServiceAuthenticationToken,\r\n                userId: this.mobileServiceClient.currentUser.userId,\r\n            };\r\n\r\n            this.fileService.storeJsonFile(this.file, this.folder, authInfo);\r\n        }\r\n\r\n        getHeaders(): ng.IPromise<any[]> {\r\n            console.log(\"mobileService.getHeaders\");\r\n            var deferred = this.$q.defer();\r\n\r\n            this.ensureLoggedIn().then(function () {\r\n                var token = this.mobileServiceClient.currentUser.mobileServiceAuthenticationToken;\r\n                var version = this.mobileServiceClient.version;\r\n                var userAgent = null;\r\n\r\n                var headers = {\r\n                    \"X-ZUMO-AUTH\": token,\r\n                    \"X-ZUMO-VERSION\": version\r\n                };\r\n\r\n                deferred.resolve(headers);\r\n            }.bind(this), function (err) {\r\n                deferred.reject(err);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        ensureLoggedIn(): ng.IPromise<{}> {\r\n            var deferred = this.$q.defer();\r\n\r\n            if (!this.loggedIn())\r\n                return this.login();\r\n            else\r\n                deferred.resolve();\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        loggedIn(): boolean {\r\n            console.log(\"mobileService.loggedIn\");\r\n            // If token doesn't exist, we aren't authenticated\r\n            if (this.mobileServiceClient.currentUser === null) return false;\r\n\r\n            // Verify expiry time of current token\r\n            var token = this.mobileServiceClient.currentUser.mobileServiceAuthenticationToken;\r\n            var decoded = this.jwtHelper.decodeToken(token);\r\n            if (typeof decoded.exp !== 'undefined') {\r\n                // exp is a UNIX Timestamp\r\n                var ts = Math.round((new Date()).getTime() / 1000);\r\n                if (ts > decoded.exp) return false;\r\n            }\r\n\r\n            // If there isn't an expiry or we haven't expired, we are authenticated\r\n            return true;\r\n        }\r\n\r\n        login(force?: boolean): ng.IPromise<{}> {\r\n            console.log(`Performing login. Forced = ${force}`);\r\n            var deferred = this.$q.defer();\r\n\r\n            // set the default value of the force parameter to false\r\n            var force = typeof force !== 'undefined' ? force : false;\r\n\r\n            // when we're already logging in; return the existing promise\r\n            if (this.loggingInPromise != null)\r\n                return this.loggingInPromise;\r\n\r\n            // Login to the service\r\n            if (!this.loggedIn() || force) {\r\n\r\n                this.loggingInPromise = deferred.promise;\r\n\r\n                console.log(\"Logging in MobileServiceClient with aad authentication.\");\r\n                this.mobileServiceClient.login('aad').then((() => {\r\n                    this.saveAuthInfo();\r\n\r\n                    // when successfully logged in; (re)register the device for push notifications\r\n                    this.initPushRegistration();\r\n\r\n                    console.log(\"Successful login with Azure mobile app.\");\r\n                    deferred.resolve();\r\n\r\n                    this.loggingInPromise = null;\r\n                }),\r\n                    function (err) {\r\n                        console.log(\"Could not login into mobile services: \" + err);\r\n                        deferred.reject(err);\r\n\r\n                        this.loggingInPromise = null;\r\n                    }.bind(this)\r\n                );\r\n            }\r\n            else {\r\n                console.log(\"Login resolving because already logged or logging in.\");\r\n                deferred.resolve();\r\n\r\n                this.loggingInPromise = null;\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        initPushRegistration(): void {\r\n            /**\r\n            * Register for Push Notifications - requires the phonegap-plugin-push be installed\r\n            */\r\n            console.log(\"Initializing push notifications\");\r\n\r\n            this.pushRegistration = window.PushNotification.init({\r\n                android: {\r\n                    senderID: this.shared.settings.apiInfo.gcmSenderID\r\n                }\r\n            });\r\n\r\n            this.pushRegistration.on('registration', ((data) => {\r\n                this.registrationId = data.registrationId;\r\n                this.registerPush();\r\n            }));\r\n\r\n            this.pushRegistration.on('notification', ((data) => {\r\n                if (data && data.message && data.message.length > 0) {\r\n                    alert(data.message);\r\n                }\r\n            }));\r\n\r\n            this.pushRegistration.on('error', ((err) => {\r\n                console.log('Push registration returned an error: ' + err);\r\n            }));\r\n        }\r\n\r\n        registerPush(): void {\r\n            console.log(\"Registering device for push notifications: \" + this.registrationId);\r\n            if (this.registrationId.length > 0) {\r\n                console.log(\"gcm id \" + this.registrationId);\r\n                if (this.mobileServiceClient) {\r\n                    console.log(\"registering with Azure for GCM notifications\");\r\n                    this.mobileServiceClient.push.register('gcm', this.registrationId, null, null, this.registrationCallback);\r\n                }\r\n            }\r\n        }\r\n\r\n        unregisterPush(): void {\r\n            console.log(\"unregistering for push messages\");\r\n            this.mobileServiceClient.push.unregister('gcm', this.registrationId);\r\n        }\r\n\r\n        registrationCallback(): void {\r\n            console.log(\"registrationCallback called.\");\r\n        }\r\n\r\n        invokeApi(apiName: string, options: {}, callback: IApiCallback): void {\r\n            this.ensureLoggedIn().then(function () {\r\n                this.mobileServiceClient.invokeApi(apiName, options, callback);\r\n            }.bind(this), function () {\r\n                console.log(\"Cannot invoke API because login failed.\");\r\n            });\r\n        }\r\n    }\r\n\r\n    angular.module(\"ngapp\").service('mobileService', MobileService);\r\n}","﻿\"use strict\";\r\n\r\nnamespace Submerged.Services {\r\n\r\n    export class ApiInfo {\r\n        apiUrl: string;\r\n        baseUrl: string;\r\n        signalRUrl: string;\r\n        gcmSenderID: string;\r\n    }\r\n\r\n    export class GlobalizationInfo {\r\n        utc_offset: number;\r\n        dst_offset: number;\r\n    }\r\n\r\n    export interface ISettings {\r\n        subscription: Models.SubscriptionModel;\r\n        apiInfo: ApiInfo;\r\n        globalizationInfo: GlobalizationInfo;\r\n        getDeviceId(): string;\r\n    }\r\n\r\n    export class Settings implements ISettings {\r\n        subscription: Models.SubscriptionModel;\r\n        apiInfo: ApiInfo;\r\n        globalizationInfo: GlobalizationInfo;\r\n\r\n        constructor() {\r\n        }\r\n\r\n        getDeviceId(): string {\r\n            if (this.subscription != null &&\r\n                this.subscription.devices != null &&\r\n                this.subscription.devices.length > 0)\r\n                return this.subscription.devices[0].deviceProperties.deviceID;\r\n            else\r\n                return \"\";\r\n        }\r\n    }\r\n\r\n    export interface IShared {\r\n        settings: ISettings;\r\n\r\n        init(): void;\r\n        save(): void;\r\n        loadSettings(mobileService: IMobileService): ng.IPromise<ISettings>;\r\n        loadSettingsFromCloud(mobileService: IMobileService): ng.IPromise<ISettings>;\r\n    }\r\n\r\n    export class Shared implements IShared {\r\n\r\n        settings: ISettings;\r\n        apiInfo: ApiInfo;\r\n        globalizationInfo: GlobalizationInfo;\r\n        file: string = \"settings.json\";\r\n\r\n        static $inject = ['fileService', '$q' ];\r\n\r\n        constructor(private fileService: IFileService, private $q: ng.IQService) {\r\n            console.log(\"Constructor of shared called\");\r\n\r\n            this.settings = new Settings();\r\n\r\n            var apiInfoObj = new ApiInfo();\r\n            apiInfoObj.apiUrl = 'https://neptune-mobileapi.azurewebsites.net';\r\n            apiInfoObj.baseUrl = apiInfoObj.apiUrl + '/api';\r\n            apiInfoObj.signalRUrl = apiInfoObj.apiUrl;\r\n            apiInfoObj.gcmSenderID = '532189147734';\r\n            this.settings.apiInfo = apiInfoObj;\r\n\r\n            var globalizationInfoObj = new GlobalizationInfo();\r\n            globalizationInfoObj.dst_offset = 0;\r\n            globalizationInfoObj.utc_offset = 0;\r\n            this.settings.globalizationInfo = globalizationInfoObj;\r\n\r\n            navigator.globalization.getDatePattern(this.globalizationSuccess, this.globalizationError);\r\n        }\r\n\r\n        globalizationSuccess(pattern) {\r\n            this.globalizationInfo.utc_offset = pattern.utc_offset;\r\n            this.globalizationInfo.dst_offset = pattern.dst_offset;\r\n        }\r\n\r\n        globalizationError(globalizationError) {\r\n            console.log(\"Globalization error: \" + globalizationError.message);\r\n        }\r\n\r\n\r\n        public init(): void {\r\n\r\n        }\r\n\r\n        public save(): void {\r\n            var folder = window.cordova.file.applicationStorageDirectory;\r\n            this.fileService.storeJsonFile(this.file, folder, this.settings);\r\n        }\r\n\r\n        private setSettings(settings: ISettings, save: boolean) {\r\n            console.log(\"setSettings\");\r\n            this.settings = new Settings();\r\n            angular.copy(settings, this.settings);\r\n\r\n            if (save)\r\n                this.save();\r\n        }\r\n\r\n        public loadSettingsFromCloud(mobileService: IMobileService): ng.IPromise<ISettings> {\r\n            console.log(\"loadSettingsFromCloud\");\r\n\r\n            var deferred = this.$q.defer<ISettings>();\r\n\r\n            this.loadFromCloud(mobileService).then(((settings: ISettings) => {\r\n                this.setSettings(settings, true);\r\n                deferred.resolve(settings);\r\n            }))\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        public loadSettings(mobileService: IMobileService): ng.IPromise<ISettings> {\r\n            return this.loadFromFile().then(((settings: ISettings) => {\r\n                this.setSettings(settings, false);\r\n                return settings;\r\n            }), ((reason: any) => {\r\n                    return this.loadSettingsFromCloud(mobileService);\r\n            }));\r\n        }\r\n\r\n        private loadFromFile(): ng.IPromise<ISettings> {\r\n            var deferred = this.$q.defer<ISettings>();\r\n            var folder = window.cordova.file.applicationStorageDirectory;\r\n\r\n            console.log(\"Initializing settings from storage.\");            \r\n            this.fileService.getJsonFile<Settings>(this.file, folder).then(\r\n                function (storedSettings) {\r\n                    if (storedSettings != null) {\r\n                         deferred.resolve(storedSettings);\r\n                    } else {\r\n                        deferred.reject();\r\n                    }\r\n                },\r\n                function () {\r\n                    deferred.reject();\r\n                }\r\n            );\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        private loadFromCloud(mobileService: IMobileService): ng.IPromise<ISettings> {\r\n            var deferred = this.$q.defer<ISettings>();\r\n\r\n            this.loadSubscription(mobileService).then(function(subscription) {\r\n\r\n                // build a new settings object and save the subscription in it\r\n                var settings: ISettings = new Settings();\r\n                settings.subscription = subscription;\r\n\r\n                deferred.resolve(settings);\r\n\r\n            }, function (err) {\r\n                deferred.reject();\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        loadSubscription(mobileService: IMobileService): ng.IPromise<Models.SubscriptionModel> {\r\n            var deferred = this.$q.defer<Models.SubscriptionModel>();\r\n            var apiUrl = \"subscription\";\r\n            mobileService.invokeApi(apiUrl, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, ((error, success) => {\r\n                if (error) {\r\n                    // do nothing\r\n                    console.log(\"Error calling /subscription to load the subscription details: \" + error);\r\n                    deferred.reject();\r\n                }\r\n                else {\r\n                    deferred.resolve(success.result);\r\n                }\r\n            }));\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        //loadSensors(deviceId: string, mobileService: IMobileService): ng.IPromise<Models.SensorModel[]> {\r\n        //    var deferred = this.$q.defer<Models.SensorModel[]>();\r\n        //    var apiUrl = \"sensors?deviceId=\" + deviceId;\r\n        //    mobileService.invokeApi(apiUrl, {\r\n        //        body: null,\r\n        //        method: \"post\"\r\n        //    }, ((error, success) => {\r\n        //        if (error) {\r\n        //            // do nothing\r\n        //            console.log(\"Error calling /sensors to load the sensor settings: \" + error);\r\n        //            deferred.reject();\r\n        //        }\r\n        //        else {\r\n        //            deferred.resolve(success.result);\r\n        //        }\r\n        //    }));\r\n\r\n        //    return deferred.promise;\r\n        //}\r\n\r\n        //loadModules(deviceId: string, mobileService: IMobileService): ng.IPromise<Models.ModuleModel[]> {\r\n        //    var deferred = this.$q.defer<Models.ModuleModel[]>();\r\n        //    var apiUrl = \"sensors?deviceId=\" + deviceId;\r\n        //    mobileService.invokeApi(apiUrl, {\r\n        //        body: null,\r\n        //        method: \"post\"\r\n        //    }, ((error, success) => {\r\n        //        if (error) {\r\n        //            // do nothing\r\n        //            console.log(\"Error calling /sensors to load the sensor settings: \" + error);\r\n        //            deferred.reject();\r\n        //        }\r\n        //        else {\r\n        //            deferred.resolve(success.result);\r\n        //        }\r\n        //    }));\r\n\r\n        //    return deferred.promise;\r\n        //}\r\n\r\n\r\n    }\r\n\r\n    angular.module(\"ngapp\").service(\"shared\", Shared);\r\n}","﻿interface JQueryStatic {\r\n    signalR: any;\r\n}\r\n\r\nnamespace Submerged.Services {\r\n\r\n    export interface ISignalRService {\r\n        init(): ng.IPromise<{}>;\r\n    }\r\n\r\n    export class SignalRService {\r\n\r\n        constructor(private mobileService: IMobileService, private $q: ng.IQService) {\r\n        }\r\n\r\n        init(): ng.IPromise<{}> {\r\n            var deferred = this.$q.defer();\r\n\r\n            console.log(\"Getting authentication headers for SignalR authentication.\");\r\n            this.mobileService.getHeaders().then(function (headers) {\r\n\r\n                // set bearer authentication for signalR requests\r\n                console.log(\"Setting signalR headers for authorization\");\r\n                jQuery.signalR.ajaxDefaults.headers = headers;\r\n\r\n                deferred.resolve();\r\n\r\n            }, function (error) {\r\n                console.log(\"Mobile service login failed: \" + error);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n    }\r\n\r\n    angular.module('ngapp').service('signalRService', SignalRService);\r\n\r\n}\r\n\r\n\"use strict\";\r\n\r\n/// <reference path=\"..\\..\\SignalR.Client.JS\\Scripts\\jquery-1.6.4.js\" />\r\n/// <reference path=\"jquery.signalR.js\" />\r\n(function ($, window, undefined) {\r\n    /// <param name=\"$\" type=\"jQuery\" />\r\n    \"use strict\";\r\n\r\n    if (typeof ($.signalR) !== \"function\") {\r\n        throw new Error(\"SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.\");\r\n    }\r\n\r\n    var signalR = $.signalR;\r\n\r\n    function makeProxyCallback(hub, callback) {\r\n        return function () {\r\n            // Call the client hub method\r\n            callback.apply(hub, $.makeArray(arguments));\r\n        };\r\n    }\r\n\r\n    function registerHubProxies(instance, shouldSubscribe) {\r\n        var key, hub, memberKey, memberValue, subscriptionMethod;\r\n\r\n        for (key in instance) {\r\n            if (instance.hasOwnProperty(key)) {\r\n                hub = instance[key];\r\n\r\n                if (!(hub.hubName)) {\r\n                    // Not a client hub\r\n                    continue;\r\n                }\r\n\r\n                if (shouldSubscribe) {\r\n                    // We want to subscribe to the hub events\r\n                    subscriptionMethod = hub.on;\r\n                } else {\r\n                    // We want to unsubscribe from the hub events\r\n                    subscriptionMethod = hub.off;\r\n                }\r\n\r\n                // Loop through all members on the hub and find client hub functions to subscribe/unsubscribe\r\n                for (memberKey in hub.client) {\r\n                    if (hub.client.hasOwnProperty(memberKey)) {\r\n                        memberValue = hub.client[memberKey];\r\n\r\n                        if (!$.isFunction(memberValue)) {\r\n                            // Not a client hub function\r\n                            continue;\r\n                        }\r\n\r\n                        subscriptionMethod.call(hub, memberKey, makeProxyCallback(hub, memberValue));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    $.hubConnection.prototype.createHubProxies = function () {\r\n        var proxies = {};\r\n        this.starting(function () {\r\n            // Register the hub proxies as subscribed\r\n            // (instance, shouldSubscribe)\r\n            registerHubProxies(proxies, true);\r\n\r\n            this._registerSubscribedHubs();\r\n        }).disconnected(function () {\r\n            // Unsubscribe all hub proxies when we \"disconnect\".  This is to ensure that we do not re-add functional call backs.\r\n            // (instance, shouldSubscribe)\r\n            registerHubProxies(proxies, false);\r\n        });\r\n\r\n        proxies['liveHub'] = this.createHubProxy('liveHub');\r\n        proxies['liveHub'].client = {};\r\n        proxies['liveHub'].server = {\r\n            getServerTime: function () {\r\n                return proxies['liveHub'].invoke.apply(proxies['liveHub'], $.merge([\"GetServerTime\"], $.makeArray(arguments)));\r\n            },\r\n\r\n            sendMessage: function (name, message) {\r\n                return proxies['liveHub'].invoke.apply(proxies['liveHub'], $.merge([\"SendMessage\"], $.makeArray(arguments)));\r\n            }\r\n        };\r\n\r\n        return proxies;\r\n    };\r\n\r\n    signalR.hub = $.hubConnection(\"https://neptune-mobileapi.azurewebsites.net/signalr/signalr\", { useDefaultPath: false });\r\n    $.extend(signalR, signalR.hub.createHubProxies());\r\n\r\n} ($, jQuery, window));","﻿namespace Submerged.Models {\r\n\r\n    export class AnalyticsDataModel {\r\n        dataLabels: string[];\r\n        dataSeries: number[][];\r\n        serieLabels: string[];\r\n    }\r\n\r\n}","﻿namespace Submerged.Models {\r\n    export class DeviceModel {\r\n        deviceProperties: DeviceProperties;\r\n        modules: ModuleModel[];\r\n        sensors: SensorModel[];\r\n        relays: RelayModel[];\r\n    }\r\n}","﻿namespace Submerged.Models {\r\n    export class DeviceProperties {\r\n        deviceID: string;\r\n        createdTime: Date;\r\n        updatedTime: Date;\r\n        isSimulatedDevice: boolean;\r\n        displayOrder: number;\r\n        primaryKey: string;\r\n        secondaryKey: string;\r\n    }\r\n}","﻿namespace Submerged.Models {\r\n\r\n    export class ModuleModel {\r\n        name: string;\r\n        description: string;\r\n        status: string;\r\n    }\r\n    \r\n}","﻿namespace Submerged.Models {\r\n    export class RelayModel {\r\n        relayNumber: number;\r\n        name: string;\r\n        state: boolean;\r\n        orderNumber: number;\r\n    }    \r\n}","﻿namespace Submerged.Models {\r\n\r\n    export class RuleModel {\r\n        sensorName: string;\r\n        threshold: number;\r\n        enabled: boolean;\r\n        operator: string;\r\n    }\r\n\r\n}","﻿namespace Submerged.Models {\r\n    export class SensorModel {\r\n        name: string;\r\n        displayName: string;\r\n        description: string;\r\n        orderNumber: number;\r\n        minThreshold: number;\r\n        maxThreshold: number;\r\n        minThresholdEnabled: boolean;\r\n        maxThresholdEnabled: boolean;\r\n        reading: any;\r\n        readingFormatted: string;\r\n        sensorType: string;\r\n    }\r\n\r\n    export class SensorRuleModel extends SensorModel {\r\n        minimumValue: number;\r\n        maximumValue: number;\r\n        step: number;\r\n    }\r\n\r\n}","﻿namespace Submerged.Models {\r\n    export class SubscriptionModel {\r\n        subscriptionProperties: SubscriptionPropertiesModel;\r\n        tanks: TankModel[];\r\n        devices: DeviceModel[];\r\n        sensors: SensorModel[];\r\n        modules: ModuleModel[];\r\n    }\r\n}","﻿namespace Submerged.Models {\r\n    export class SubscriptionPropertiesModel {\r\n        subscriptionId: string;\r\n        name: string;\r\n        user: string;\r\n        description: string;\r\n        subscriptionEnabledState: boolean;\r\n        created: Date;\r\n        UpdatedTeim: Date;\r\n    }\r\n}","﻿namespace Submerged.Models {\r\n    export class TankModel {\r\n        id: string;\r\n        name: string;\r\n        description: string;\r\n    }\r\n}","﻿interface ITimerScope extends ng.IScope {\r\n    startTimer();\r\n    stopTimer();\r\n}\r\n\r\nangular.module('TimerApp', [])\r\n    .controller('TimerCtrl', function ($scope: ITimerScope, $timeout: ng.ITimeoutService) {\r\n        $scope.startTimer = function () {\r\n            $scope.$broadcast('timer-start');\r\n        };\r\n        $scope.stopTimer = function () {\r\n            $scope.$broadcast('timer-stop');\r\n        };\r\n        $scope.$on('timer-stopped', function (event, remaining) {\r\n            if (remaining === 0) {\r\n                console.log('your time ran out!');\r\n            }\r\n        });\r\n    })\r\n    .directive('timer', function ($compile: ng.ICompileService) {\r\n        return {\r\n            restrict: 'E',\r\n            scope: false,\r\n            replace: false,\r\n            controller: function ($scope: ITimerScope, $element: ng.IAugmentedJQuery, $timeout: ng.ITimeoutService) {\r\n                var timeoutId = null;\r\n\r\n                var elem = $compile('<p>{{counter}}</p>')($scope);\r\n                $element.append(elem);\r\n            }\r\n        };\r\n    });","﻿angular.module('ngapp').directive('smLoadingIndicator', function () {\r\n    return {\r\n        restrict: 'EA', //E = element, A = attribute, C = class, M = comment    \r\n        templateUrl: 'app/directives/loading-indicator.html',\r\n        replace: true,\r\n        transclude: true,\r\n        scope: {\r\n            displayText: '=smText'\r\n        },\r\n        link: function ($scope, element, attrs) {\r\n        }\r\n    };\r\n});","﻿interface IMenuScope extends ng.IScope {\r\n    toggle();\r\n    navigate(route: string);\r\n    title: string;\r\n}\r\n\r\nangular.module(\"ngapp\").controller(\"MenuController\", function (shared: Submerged.Services.IShared, $state: ng.ui.IStateService, $scope: IMenuScope,\r\n    $rootScope: ng.IRootScopeService, $timeout: ng.ITimeoutService, $mdSidenav) {\r\n\r\n    var toggle = function () {\r\n        $mdSidenav(\"left\").toggle();\r\n    }\r\n\r\n    var navigate = function (route) {\r\n        $state.go(route);\r\n        this.toggle();\r\n    }\r\n\r\n    $scope.toggle = toggle;\r\n    $scope.navigate = navigate;\r\n\r\n    var listener = function (event, toState) {\r\n\r\n        var title = 'Submerged';\r\n        if (toState.title) title = toState.title;\r\n\r\n        $timeout(function () {\r\n            $scope.title = title;\r\n        }, 0, false);\r\n    };\r\n\r\n    $rootScope.$on('$stateChangeSuccess', listener);\r\n});","﻿namespace Submerged.Controllers {\r\n\r\n    export class AnalyticsController {\r\n\r\n        loading: boolean;        \r\n        deviceId: string;\r\n\r\n        pickedDate: Date = new Date();\r\n        loadedTabData: number = -1;\r\n        selectedTabIndex: number = 0;\r\n\r\n        tempChartHour: google.visualization.LineChart;\r\n        pHChartHour: google.visualization.LineChart;\r\n        tempChartDay: google.visualization.LineChart;\r\n        pHChartDay: google.visualization.LineChart;\r\n        tempChartWeek: google.visualization.LineChart;\r\n        pHChartWeek: google.visualization.LineChart;\r\n        tempChartMonth: google.visualization.LineChart;\r\n        pHChartMonth: google.visualization.LineChart;\r\n\r\n        sensors: Submerged.Models.SensorModel[];\r\n\r\n        static $inject = ['shared', 'mobileService', '$scope', '$stateParams', '$timeout'];\r\n\r\n        constructor(private shared: Services.IShared, private mobileService: Services.IMobileService,\r\n            private $scope: ng.IRootScopeService, private $stateParams: ng.ui.IStateParamsService, private $timeout: ng.ITimeoutService) {\r\n\r\n            this.deviceId = shared.settings.getDeviceId();\r\n            this.loadSensors();\r\n\r\n            $scope.$watch(() => { return this.selectedTabIndex; }, (newValue, oldValue) => {\r\n                this.getData();\r\n            });\r\n            $scope.$watch(() => { return this.pickedDate; }, (newValue, oldValue) => {\r\n                this.getData();\r\n            });\r\n        }\r\n\r\n        selectedTabName(): string {\r\n            switch (this.selectedTabIndex) {\r\n                case 0:\r\n                    return \"hour\";\r\n                case 1:\r\n                    return \"day\";\r\n                case 2:\r\n                    return \"week\";\r\n                case 3:\r\n                    return \"month\";\r\n            }\r\n        }\r\n\r\n        loadSensors(): void {\r\n            var apiUrl = \"sensors?deviceId=\" + this.deviceId;\r\n            this.mobileService.invokeApi(apiUrl, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, ((error, success) => {\r\n                if (error) {\r\n                    // do nothing\r\n                    console.log(\"Error calling /sensors to get sensors data: \" + error);\r\n                }\r\n                else {\r\n                    var sensors: Models.SensorModel[] = success.result;\r\n                    this.processSensors(sensors);      // process the last known data for display\r\n\r\n                    this.shared.settings.subscription.sensors = sensors;\r\n                    this.shared.save();\r\n                }\r\n            }).bind(this));\r\n        }\r\n        \r\n        processSensors(sensors: Models.SensorModel[]): void {\r\n            this.sensors = sensors;\r\n        }\r\n\r\n        chartOptions(sensor: Models.SensorModel, hAxisLabel: string, hAxisLabels: number): google.visualization.AreaChartOptions {\r\n            var options = <google.visualization.AreaChartOptions>{\r\n                isStacked: false,\r\n                legend: 'none',\r\n                title: sensor.displayName,\r\n                vAxis: <google.visualization.ChartAxis>{\r\n                    gridlines: <google.visualization.ChartGridlines>{\r\n                        count: 5\r\n                    },\r\n                    maxValue: sensor.maxThreshold,\r\n                    minValue: sensor.minThreshold\r\n                },\r\n                hAxis: <google.visualization.ChartAxis>{\r\n                    showTextEvery: hAxisLabels,\r\n                    title: hAxisLabel\r\n                }\r\n            };\r\n\r\n            return options;\r\n        };\r\n\r\n        renderChart(dataLabels: any[], data: any[], sensor: Models.SensorModel, chartPostfix: string): void {\r\n            var columnName: string;\r\n            var hAxisLabels: number;\r\n\r\n            switch (this.selectedTabIndex) {\r\n                case 0: columnName = \"Minutes\"; hAxisLabels = 10; break;\r\n                case 1: columnName = \"Hours\"; hAxisLabels = 2; break;\r\n                case 2: columnName = \"Weekdays\"; hAxisLabels = 2; break;\r\n                case 3: columnName = \"Days\"; hAxisLabels = 4; break;\r\n            }\r\n\r\n            var dataTable: google.visualization.DataTable = new google.visualization.DataTable();\r\n            dataTable.addColumn('string', columnName);\r\n            dataTable.addColumn('number', sensor.displayName);\r\n\r\n            for (var i = 0; i < data.length; i++) {\r\n                dataTable.addRow([dataLabels[i], data[i]]);\r\n            }\r\n\r\n            // construct the options class for this chart\r\n            var options = this.chartOptions(sensor, columnName, hAxisLabels);\r\n\r\n            // construct the element id of the chart \r\n            var elementId = sensor.name + '_chart_' + chartPostfix;\r\n            var element = document.getElementById(elementId);\r\n\r\n            // construct the chart object and render the chart in the element\r\n            var chart = new google.visualization.AreaChart(element);\r\n            chart.draw(dataTable, options);\r\n        }\r\n\r\n        getData(): void {\r\n            // prevent loading multiple times\r\n            if (this.loading) {\r\n                console.log(\"Ignoring call to getData because we're already loading\");\r\n                return;\r\n            }\r\n\r\n            this.loading = true;\r\n\r\n            var date = this.pickedDate;\r\n            var selectedTab = this.selectedTabName();\r\n\r\n            // toISOString already converts the date \r\n            var resourceUri = \"data/\" + selectedTab + \"?deviceId=\" + this.deviceId + \"&date=\" + date.toISOString() + \"&offset=\" + date.getTimezoneOffset();\r\n\r\n            console.log(\"Requesting data from back-end API\");\r\n\r\n            this.mobileService.invokeApi(resourceUri, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, ((error, success) => {\r\n                if (error) {\r\n                    console.log(\"Failure getting data from API: \" + error);\r\n                }\r\n                else {\r\n                    var reportModel = success.result;\r\n                    var columnName = \"\";\r\n\r\n                    var temp1Sensor = this.sensors.firstOrDefault({ name: \"temperature1\" });\r\n                    this.renderChart(reportModel.dataLabels, reportModel.dataSeries[0], temp1Sensor, selectedTab);\r\n                    var temp2Sensor = this.sensors.firstOrDefault({ name: \"temperature2\" });\r\n                    this.renderChart(reportModel.dataLabels, reportModel.dataSeries[1], temp2Sensor, selectedTab);\r\n                    var pHSensor = this.sensors.firstOrDefault({ name: 'pH' });\r\n                    this.renderChart(reportModel.dataLabels, reportModel.dataSeries[2], pHSensor, selectedTab);\r\n\r\n                    console.log(\"data loaded, setting loadedTabData to \" + this.selectedTabIndex);\r\n                    this.loadedTabData = this.selectedTabIndex;\r\n\r\n                    this.loading = false;\r\n                }\r\n            }).bind(this));            \r\n        }\r\n    }\r\n\r\n    angular.module(\"ngapp\").controller(\"AnalyticsController\", AnalyticsController);\r\n}","﻿namespace Submerged.Controllers {\r\n    export class ControlController {\r\n\r\n        relays: Models.RelayModel[];\r\n        deviceId: string;\r\n\r\n        constructor(private shared: Services.IShared, private mobileService: Services.IMobileService, private $mdToast: ng.material.IToastService,\r\n            private $state: ng.ui.IStateService) {\r\n\r\n            this.deviceId = shared.settings.getDeviceId();\r\n\r\n            var apiUrl = \"control/relays?deviceId=\" + this.deviceId;\r\n\r\n            this.mobileService.invokeApi(apiUrl, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, ((error, success) => {\r\n                if (!error) {\r\n                    // do nothing\r\n                    this.processRelays(success.result);\r\n                }\r\n            }).bind(this));\r\n        }\r\n\r\n        processRelays(relays: Models.RelayModel[]) {\r\n            this.relays = relays;\r\n        }\r\n\r\n         showSimpleToast(text: string) {\r\n            this.$mdToast.show(\r\n                this.$mdToast.simple()\r\n                    .textContent(text)\r\n                    .position(\"top right\")\r\n                    .hideDelay(3000)\r\n            );\r\n        };\r\n\r\n        toggle(relayNumber: number, relayState: boolean) {\r\n            var apiUrl = \"control/setrelay?deviceId=\" + this.deviceId + \"&relayNumber=\" + relayNumber + \"&state=\" + relayState;\r\n            this.mobileService.invokeApi(apiUrl, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, ((error, success) => {\r\n                    if (error) {\r\n                        // do nothing\r\n                        this.showSimpleToast(\"Sorry, settings were not saved.\");\r\n                    }\r\n                }).bind(this));\r\n        };\r\n    }\r\n\r\n    angular.module(\"ngapp\").controller(\"ControlController\", ControlController);\r\n}\r\n\r\n\r\n\r\n//\"use strict\";\r\n\r\n//angular.module(\"ngapp\").controller(\"ControlController\", function (shared, mobileService, $mdToast, $state, $scope, $mdSidenav, $mdComponentRegistry) {\r\n\r\n//    var vm = this;\r\n\r\n//    vm.relays = [\r\n//        { title: \"Pump\", state: true, number: 1 },\r\n//        { title: \"Heat\", state: true, number: 2 },\r\n//        { title: \"Lights\", state: true, number: 3 }\r\n//    ];\r\n\r\n//    var showSimpleToast = function (text) {\r\n//        $mdToast.show(\r\n//            $mdToast.simple()\r\n//                .textContent(text)\r\n//                .position(\"top right\")\r\n//                .hideDelay(3000)\r\n//        );\r\n//    };\r\n\r\n\r\n//    vm.toggle = function (relayNumber, relayState) {\r\n//        var apiUrl = \"control/setrelay?deviceId=\" + shared.deviceInfo.deviceId + \"&relayNumber=\" + relayNumber + \"&state=\" + relayState;\r\n//        mobileService.invokeApi(apiUrl, {\r\n//            body: null,\r\n//            method: \"post\"\r\n//        }, function (error, success) {\r\n//            if (error) {\r\n//                // do nothing\r\n//                showSimpleToast(\"Sorry, settings were not saved.\");\r\n//            }\r\n//        });\r\n//    };\r\n//});\r\n","﻿interface JQueryStatic {\r\n    connection: any;\r\n}\r\n\r\nnamespace Submerged.Controllers {\r\n\r\n    export class LiveController {\r\n\r\n        leakDetected: boolean;\r\n        leakSensors: string;\r\n        loading: boolean = true;\r\n        selectedTabIndex: number = 0;\r\n        counterStarted: boolean;\r\n        lastUpdated: number;\r\n        lastUpdatedText: string;\r\n\r\n        temperature1: number;\r\n        temperature1Low: number;\r\n        temperature1High: number;\r\n        temperature1Class: string;\r\n\r\n        temperature2: number;\r\n        temperature2Low: number;\r\n        temperature2High: number;\r\n        temperature2Class: string;\r\n\r\n        pH: number;\r\n        pHLow: number;\r\n        pHHigh: number;\r\n        pHClass: string;\r\n\r\n        leakText: string;\r\n        leakClass: string;\r\n\r\n        sensorData: boolean;\r\n        leakData: boolean;\r\n\r\n        modules: Submerged.Models.ModuleModel[];\r\n        sensors: Submerged.Models.SensorModel[];\r\n\r\n        timeoutId: any;\r\n\r\n        deviceId: string;\r\n\r\n        static $inject = ['shared', 'mobileService', 'signalRService', '$state', '$scope', '$timeout', '$sce'];\r\n\r\n        constructor(private shared: Submerged.Services.IShared, private mobileService: Submerged.Services.IMobileService,\r\n            private signalRService: Submerged.Services.ISignalRService,\r\n            private $state: ng.ui.IState, private $scope: ng.IRootScopeService, private $timeout: ng.ITimeoutService,\r\n            private $sce: ng.ISCEService) {\r\n\r\n            this.deviceId = shared.settings.getDeviceId();\r\n\r\n            // get the settings stored in local storage; when empty refresh from cloud\r\n            var settings = shared.settings;\r\n            if (settings.subscription.sensors == null || settings.subscription.sensors.length == 0) {\r\n                this.loadSensors();\r\n            }\r\n            else {\r\n                this.processSensors(settings.subscription.sensors);\r\n            }\r\n\r\n            $scope.$watch(() => { return this.selectedTabIndex; }, (newValue, oldValue) => {\r\n                this.loadData();\r\n            });\r\n\r\n            this.$scope.$on(\"$destroy\", function () {\r\n                console.log(\"Stopping signalR hub since the user is leaving this view.\");\r\n                jQuery.connection.hub.stop();\r\n            });\r\n\r\n            this.$scope.$on(\"resume\", function (event, data) {\r\n                console.log(\"Received resume event in live controller\");\r\n\r\n                // reload the data to freshen up\r\n                this.loadData();\r\n\r\n                // when the application gets resumed, we need to restart signalR\r\n                $.connection.hub.stop();\r\n                this.startSignalR();\r\n            }.bind(this))\r\n        };\r\n\r\n        loadData(): void {\r\n            this.loading = true;\r\n\r\n            if (this.selectedTabIndex == 0) {\r\n                this.loadLatestTelemetry();\r\n                this.loadLastThreeHours();\r\n            }\r\n            else if (this.selectedTabIndex == 1) {\r\n                this.loadModuleData();\r\n            }\r\n        };\r\n\r\n        loadSensors(): void {\r\n            var apiUrl = \"sensors?deviceId=\" + this.deviceId;\r\n            this.mobileService.invokeApi(apiUrl, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, ((error, success) => {\r\n                if (error) {\r\n                    // do nothing\r\n                    console.log(\"Error calling /sensors to get sensors data: \" + error);\r\n                }\r\n                else {\r\n                    var sensors: Models.SensorModel[] = success.result;\r\n                    this.processSensors(sensors);      // process the last known data for display\r\n\r\n                    this.shared.settings.subscription.sensors = sensors;\r\n                    this.shared.save();    \r\n                }\r\n            }).bind(this));\r\n        }\r\n\r\n        formatSensorValue(sensor: Models.SensorModel, value: any): any {\r\n            var result: string = \"\";\r\n            if (value != null) {\r\n                switch (sensor.sensorType) {\r\n                    case \"temperature\":\r\n                        result = value.toFixed(1) + '&deg;';\r\n                        break;\r\n                    case \"pH\":\r\n                        result = value.toFixed(2);\r\n                        break;\r\n                    default:\r\n                        result = value.toString();\r\n                        break;\r\n                }\r\n            }\r\n\r\n            return this.$sce.trustAsHtml(result);\r\n        }\r\n\r\n        loadLastThreeHours(): void {\r\n            var date = new Date();\r\n            var url = \"data/threehours?deviceId=\" + this.deviceId + \"&date=\" + date.toISOString() + \"&offset=\" + date.getTimezoneOffset();\r\n\r\n             this.mobileService.invokeApi(url, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, function (error, success) {\r\n                if (error) {\r\n                    // do nothing\r\n                    console.log(\"Error calling /data/threehours: \" + error);\r\n                }\r\n                else {\r\n                    this.processThreeHours(success.result);\r\n                }\r\n            }.bind(this));\r\n        }\r\n\r\n        loadLatestTelemetry(): void {\r\n            // get the latest available data record to show untill it's updated\r\n            this.mobileService.invokeApi(\"data/latest?deviceId=\" + this.deviceId, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, function (error, success) {\r\n                if (error) {\r\n                    // do nothing\r\n                    console.log(\"Error calling /data/latest: \" + error);\r\n                }\r\n                else {\r\n                    this.processTelemetry(success.result);      // process the last known data for display\r\n                    this.startSignalR();         // start signalR when the data is received \r\n                }\r\n            }.bind(this));\r\n        }\r\n\r\n        processSensors(sensors: Models.SensorModel[]): void {\r\n            this.sensors = sensors;    \r\n        }\r\n\r\n        processThreeHours(data: Models.AnalyticsDataModel): void\r\n        {\r\n            var temperature1Sensor: Models.SensorModel = this.sensors.firstOrDefault({ name: \"temperature1\" });\r\n            this.renderChart(data.dataLabels, data.dataSeries[0], \"temperature1_chart\");\r\n\r\n            var temperature2Sensor: Models.SensorModel = this.sensors.firstOrDefault({ name: \"temperature2\" });\r\n            this.renderChart(data.dataLabels, data.dataSeries[1], \"temperature2_chart\");\r\n\r\n            var pHSensor: Models.SensorModel = this.sensors.firstOrDefault({ name: \"pH\" });\r\n            this.renderChart(data.dataLabels, data.dataSeries[2], \"pH_chart\");\r\n        }\r\n\r\n        renderChart(dataLabels: any[], data: any[], elementId: string): void {\r\n\r\n            var dataTable: google.visualization.DataTable = new google.visualization.DataTable();\r\n            dataTable.addColumn('string');\r\n            dataTable.addColumn('number');\r\n\r\n            for (var i = 0; i < data.length; i++) {\r\n                dataTable.addRow([dataLabels[i], data[i]]);\r\n            }\r\n\r\n            var options = <google.visualization.AreaChartOptions> {\r\n                axisTitlesPosition: 'none',\r\n                isStacked: false,\r\n                displayExactValues: false,\r\n                curveType: 'function',\r\n                tooltip: <google.visualization.ChartTooltip> {\r\n                    trigger: 'none',\r\n                },\r\n                legend: <google.visualization.ChartLegend> {\r\n                    position: 'none'\r\n                },\r\n                vAxis: <google.visualization.ChartAxis> {\r\n                    gridlines: {\r\n                        count: 2,\r\n                    },\r\n                },\r\n                hAxis: <google.visualization.ChartAxis>{\r\n                    gridlines: {\r\n                        count: 6,\r\n                    },\r\n                },\r\n                series: {\r\n                    0: {\r\n                        targetAxisIndex: 1\r\n                    }\r\n                },\r\n                height: 45,\r\n                width: 200\r\n            };\r\n\r\n            var element = document.getElementById(elementId);\r\n            var chart = new google.visualization.AreaChart(element);\r\n            chart.draw(dataTable, options);\r\n        }\r\n\r\n        processTelemetry(data): void {\r\n            this.sensorData = data.temperature1 != null;\r\n            this.leakData = data.leakDetected != null;\r\n\r\n            this.loading = false;\r\n            this.$scope.$apply();\r\n\r\n            // when the timestamp is set (blob stored data); use it, otherwise timestamp = now\r\n            if (data.timestamp != null)\r\n                this.start(data.timestamp);\r\n            else\r\n                this.start(new Date().valueOf());\r\n\r\n            for (var property in data) {\r\n                if (data.hasOwnProperty(property)) {\r\n                    // find a sensor by the name of the property\r\n                    var sensor: Models.SensorModel = this.sensors.firstOrDefault({ name: property });\r\n                    if (sensor != null) {\r\n                        sensor.reading = data[property];\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        loadModuleData(): void {\r\n\r\n            this.loading = true;\r\n\r\n            // get the latest available data record to show untill it's updated\r\n            this.mobileService.invokeApi(\"modules?deviceId=\" + this.deviceId, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, function (error, success) {\r\n                if (error) {\r\n                    // do nothing\r\n                    console.log(\"Error calling /modules: \" + error);\r\n                }\r\n                else {\r\n                    this.processModules(success.result);      // process the last known data for display\r\n                }\r\n            }.bind(this));\r\n\r\n        };\r\n\r\n        processModules = function (modules) {\r\n            for (var module of modules) {\r\n                if (module.status != \"Connected\")\r\n                    module.cssClass = \"npt-kpired\";\r\n                else\r\n                    module.cssClass = \"npt-kpigreen\";\r\n            }\r\n\r\n            this.modules = modules;\r\n\r\n            this.loading = false;\r\n            this.$scope.$apply();\r\n        }\r\n\r\n        calculateSensorClass(sensor: Models.SensorModel) {\r\n            if (sensor != null && sensor.reading != null) {\r\n\r\n                // find the low and high rules for this sensor\r\n                var lowValue = sensor.minThreshold;\r\n                var highValue = sensor.maxThreshold;\r\n\r\n                var deviation = (highValue - lowValue) * 0.1;\r\n                var orangeLowValue = lowValue + deviation;\r\n                var orangeHighValue = highValue - deviation;\r\n\r\n                if (sensor.reading < orangeHighValue && sensor.reading > orangeLowValue)\r\n                    return \"md-fab npt-kpigreen\";\r\n                else if (sensor.reading < lowValue || sensor.reading > highValue)\r\n                    return \"md-fab npt-kpired\";\r\n                else\r\n                    return \"md-fab npt-kpiorange\";\r\n            }\r\n            else {\r\n                return \"md-fab npt-kpigray\";\r\n            }\r\n        }\r\n\r\n        openDetails = function (item) {\r\n            this.$state.go('analytics', {\r\n                tab: \"day\",\r\n                sensor: item\r\n            });\r\n        };\r\n\r\n        startSignalR(): void {\r\n            this.signalRService.init().then(function () {\r\n                var liveHubProxy = jQuery.connection.liveHub;\r\n\r\n                liveHubProxy.client.sendLiveData = ((data) => {\r\n                    this.processData(data);\r\n                }).bind(this);\r\n\r\n                jQuery.connection.hub.start()\r\n                    .done(function () { console.log('Now connected, connection ID=' + jQuery.connection.hub.id); })\r\n                    .fail(function (err) {\r\n                        console.log('Could not connect: ' + err);\r\n                        // connecting might have failed due to expired login. Force login to refresh token,\r\n                        // the disconnect event handler will try again after 5 seconds\r\n                        this.mobileService.login(true);\r\n                    });\r\n\r\n                // attach disconnected listener and automatically restart the connection\r\n                jQuery.connection.hub.disconnected(function () {\r\n                    setTimeout(function () {\r\n                        jQuery.connection.hub.start();\r\n                    }, 5000); // Restart connection after 5 seconds.you can set the time based your requirement\r\n                });\r\n\r\n            }.bind(this));\r\n        };\r\n\r\n        start(timestamp: number): void {\r\n            if (this.timeoutId) {\r\n                this.$timeout.cancel(this.timeoutId);\r\n            }\r\n\r\n            this.timeoutId = this.$timeout(this.onTimeout.bind(this), 1000);\r\n            this.lastUpdated = timestamp;\r\n        };\r\n\r\n        stop(): void {\r\n            this.$timeout.cancel(this.timeoutId);\r\n            this.timeoutId = null;\r\n        };\r\n\r\n        onTimeout(): void {\r\n            var dif: number;\r\n            dif = new Date().valueOf() - this.lastUpdated;\r\n\r\n            var seconds = Math.floor((dif / 1000) % 60);\r\n            var minutes = Math.floor(((dif / (60000)) % 60));\r\n            var hours = Math.floor(((dif / (3600000)) % 24));\r\n            var days = Math.floor(((dif / (3600000)) / 24) % 30);\r\n            var months = Math.floor(((dif / (3600000)) / 24 / 30) % 12);\r\n            var years = Math.floor((dif / (3600000)) / 24 / 365);\r\n\r\n            var text = null;\r\n\r\n            if (years > 0)\r\n                text = years.toString() + \" years\";\r\n            else if (months > 0)\r\n                text = months.toString() + \" months\";\r\n            else if (days > 0)\r\n                text = days.toString() + \" days\";\r\n            else if (hours > 0)\r\n                text = hours.toString() + \" hours\";\r\n            else if (minutes > 0)\r\n                text = minutes.toString() + \" minutes\";\r\n            else\r\n                text = seconds.toString() + \" seconds\";\r\n\r\n            this.lastUpdatedText = text;\r\n            this.timeoutId = this.$timeout(() => { this.onTimeout(); }, 1000);\r\n        };\r\n    }\r\n\r\n    angular.module(\"ngapp\").controller(\"LiveController\", LiveController);\r\n}\r\n\r\n//angular.module(\"ngapp\").controller(\"LiveController\", function (shared, mobileService, signalr, $state, $scope, $timeout) {\r\n//    var vm = this;\r\n\r\n//    // initialization of the local viewmodel data\r\n//    vm.leakDetected = false;\r\n//    vm.leakSensors = \"\";\r\n//    vm.lastUpdated = null;\r\n//    vm.loading = true;\r\n//    vm.selectedTabIndex = 0;\r\n//    vm.counterStarted = false;\r\n\r\n\r\n//    // start loading the data \r\n//    loadData();\r\n\r\n//    function loadRules() {\r\n//        var apiUrl = \"rules?deviceId=\" + shared.deviceInfo.deviceId;\r\n//        mobileService.invokeApi(apiUrl, {\r\n//            body: null,\r\n//            method: \"post\"\r\n//        }, function (error, success) {\r\n//            if (error) {\r\n//                // do nothing\r\n//                console.log(\"Error calling /rules to get device rules: \" + error);\r\n//            }\r\n//            else {\r\n//                processRules(success.result);      // process the last known data for display\r\n//            }\r\n//        });\r\n//    }\r\n\r\n//    function processRules(rules) {\r\n//        var sensorRules = rules.where({ name: \"temperature1\" });\r\n//        if (sensorRules.length == 2) {\r\n//            vm.temperature1Low = sensorRules[0].threshold;\r\n//            vm.temperature1High = sensorRules[1].threshold;\r\n//        }\r\n//        sensorRules = rules.where({ name: \"temperature2\" });\r\n//        if (sensorRules.length == 2) {\r\n//            vm.temperature2Low = sensorRules[0].threshold;\r\n//            vm.temperature2High = sensorRules[1].threshold;\r\n//        }\r\n//        sensorRules = rules.where({ name: \"pH\" });\r\n//        if (sensorRules.length == 2) {\r\n//            vm.pHLow = sensorRules[0].threshold;\r\n//            vm.pHHigh = sensorRules[1].threshold;\r\n//        }\r\n//    }\r\n\r\n//    function calculateKpiClass(sensor, value) {\r\n//        if (settings.rules != null) {\r\n//            var sensorRules = settings.rules.where({ name: sensor });\r\n\r\n//            // find the low and high rules for this sensor\r\n//            var lowValue = sensorRules[0].threshold;\r\n//            var highValue = sensorRules[1].threshold;\r\n\r\n//            var deviation = (highValue - lowValue) * 0.1;\r\n//            var orangeLowValue = lowValue + deviation;\r\n//            var orangeHighValue = highValue - deviation;\r\n\r\n//            if (value < orangeHighValue && value > orangeLowValue)\r\n//                return \"md-fab npt-kpigreen\";\r\n//            else if (value < lowValue || value > highValue)\r\n//                return \"md-fab npt-kpired\";\r\n//            else\r\n//                return \"md-fab npt-kpiorange\";\r\n//        }\r\n//        else {\r\n//            return \"md-fab npt-kpiorange\";\r\n//        }\r\n\r\n//    }\r\n\r\n//    vm.getModuleCss = function (status) {\r\n\r\n//    };\r\n\r\n//    $scope.$on(\"resume\", function (event, data) {\r\n//        console.log(\"Received resume event in live controller\");\r\n//        // when the application gets resumed, we need to restart signalR \r\n//        $.connection.hub.stop();\r\n//        startSignalR();\r\n\r\n//        // reload the \r\n//        loadData();\r\n//    })\r\n\r\n//    $scope.$watch(\"vm.selectedTabIndex\", function (newValue, oldValue) {\r\n//        loadData();\r\n//    });\r\n\r\n//    var openDetails = function (item) {\r\n//        $state.go('analytics', {\r\n//            tab: \"day\",\r\n//            sensor: item\r\n//        });\r\n//    };\r\n\r\n//    vm.openDetails = openDetails;\r\n\r\n//    var processModules = function (modules) {\r\n//        for (var module of modules) {\r\n//            if (module.status == \"Disconnected\")\r\n//                module.cssClass = \"npt-kpired\";\r\n//            else\r\n//                module.cssClass = \"npt-kpigreen\";\r\n//        }\r\n\r\n//        vm.modules = modules;\r\n\r\n//        vm.loading = false;\r\n//        $scope.$apply();\r\n//    }\r\n\r\n//    var processData = function (data) {\r\n//        // set the data object when it hasn't been set yet\r\n//        if (data.temperature1 != null) {\r\n//            vm.temperature1 = data.temperature1.toFixed(1);\r\n//            vm.temperature1Class = calculateKpiClass(\"temperature1\", vm.temperature1);\r\n//        }\r\n\r\n//        if (data.temperature2 != null) {\r\n//            vm.temperature2 = data.temperature2.toFixed(1);\r\n//            vm.temperature2Class = calculateKpiClass(\"temperature2\", vm.temperature2);\r\n//        }\r\n\r\n//        if (data.pH != null) {\r\n//            vm.pH = data.pH.toFixed(2);\r\n//            vm.phClass = calculateKpiClass(\"pH\", vm.pH);\r\n//        }\r\n\r\n//        if (data.leakDetected != null) {\r\n//            vm.leakDetected = data.leakDetected;\r\n//            vm.leakText = data.leakDetected ? \"!!\" : \"OK\";\r\n//            vm.leakClass = data.leakDetected ? \"md-fab npt-kpired\" : \"md-fab npt-kpigreen\";\r\n//            vm.leakSensors = data.leakSensors;\r\n//        }\r\n\r\n//        vm.sensorData = data.temperature1 != null;\r\n//        vm.leakData = data.leakDetected != null;\r\n\r\n//        vm.loading = false;\r\n//        $scope.$apply();\r\n\r\n//        // when the timestamp is set (blob stored data); use it, otherwise timestamp = now\r\n//        if (data.timestamp != null)\r\n//            start(data.timestamp);\r\n//        else\r\n//            start(new Date());\r\n//    };\r\n\r\n//    function loadData() {\r\n//        if (vm.selectedTabIndex == 0)\r\n//            loadLatestTelemetry();\r\n//        else if (vm.selectedTabIndex == 1)\r\n//            loadModuleData();\r\n//    }\r\n\r\n//    function loadModuleData() {\r\n//        if (vm.modules != null) {\r\n//            return;\r\n//        }\r\n//        else {\r\n//            vm.loading = true;\r\n\r\n//            // get the latest available data record to show untill it's updated\r\n//            mobileService.invokeApi(\"data/modules?deviceId=\" + shared.deviceInfo.deviceId, {\r\n//                body: null,\r\n//                method: \"post\"\r\n//            }, function (error, success) {\r\n//                if (error) {\r\n//                    // do nothing\r\n//                    console.log(\"Error calling /data/latest: \" + error);\r\n//                }\r\n//                else {\r\n//                    processModules(success.result);      // process the last known data for display\r\n//                }\r\n//            });\r\n//        }\r\n//    }\r\n\r\n//    function loadLatestTelemetry() {\r\n//        // get the latest available data record to show untill it's updated\r\n//        mobileService.invokeApi(\"data/latest?deviceId=\" + shared.deviceInfo.deviceId, {\r\n//            body: null,\r\n//            method: \"post\"\r\n//        }, function (error, success) {\r\n//            if (error) {\r\n//                // do nothing\r\n//                console.log(\"Error calling /data/latest: \" + error);\r\n//            }\r\n//            else {\r\n//                processData(success.result);      // process the last known data for display\r\n//                startSignalR();         // start signalR when the data is received \r\n//            }\r\n//        });\r\n//    };\r\n\r\n//    function startSignalR() {\r\n//        signalr().then(function () {\r\n//            var liveHubProxy = $.connection.liveHub;\r\n\r\n//            liveHubProxy.client.sendLiveData = processData;\r\n\r\n//            $.connection.hub.start()\r\n//                .done(function () { console.log('Now connected, connection ID=' + $.connection.hub.id); })\r\n//                .fail(function (err) {\r\n//                    console.log('Could not connect: ' + err);\r\n//                    // connecting might have failed due to expired login. Force login to refresh token,\r\n//                    // the disconnect event handler will try again after 5 seconds\r\n//                    mobileService.login(true);\r\n//                });\r\n\r\n//            // attach disconnected listener and automatically restart the connection\r\n//            $.connection.hub.disconnected(function () {\r\n//                setTimeout(function () {\r\n//                    $.connection.hub.start();\r\n//                }, 5000); // Restart connection after 5 seconds.you can set the time based your requirement\r\n//            });\r\n\r\n//            $scope.$on(\"$destroy\", function () {\r\n//                console.log(\"Stopping signalR hub since the user is leaving this view.\");\r\n//                $.connection.hub.stop();\r\n//            });\r\n//        });\r\n//    }\r\n\r\n//    var timeoutId: number = null;\r\n//    var lastUpdated: number;\r\n\r\n//    function start(timestamp) {\r\n//        lastUpdated = Date.parse(timestamp);\r\n\r\n//        if (!vm.counterStarted) {\r\n//            timeoutId = $timeout(onTimeout, 1000);\r\n//            vm.counterStarted = true;\r\n//        }\r\n//    }\r\n\r\n//    function stop() {\r\n//        $timeout.cancel(timeoutId);\r\n//        vm.counterStarted = false;\r\n//    }\r\n\r\n//    function onTimeout() {\r\n//        var dif: number;\r\n//        dif = new Date().valueOf() - lastUpdated;\r\n\r\n//        var seconds = Math.floor((dif / 1000) % 60);\r\n//        var minutes = Math.floor(((dif / (60000)) % 60));\r\n//        var hours = Math.floor(((dif / (3600000)) % 24));\r\n//        var days = Math.floor(((dif / (3600000)) / 24) % 30);\r\n//        var months = Math.floor(((dif / (3600000)) / 24 / 30) % 12);\r\n//        var years = Math.floor((dif / (3600000)) / 24 / 365);\r\n\r\n//        var text = null;\r\n\r\n//        if (years > 0)\r\n//            text = years.toString() + \" years\";\r\n//        else if (months > 0)\r\n//            text = months.toString() + \" months\";\r\n//        else if (days > 0)\r\n//            text = days.toString() + \" days\";\r\n//        else if (hours > 0)\r\n//            text = hours.toString() + \" hours\";\r\n//        else if (minutes > 0)\r\n//            text = minutes.toString() + \" minutes\";\r\n//        else\r\n//            text = seconds.toString() + \" seconds\";\r\n\r\n//        vm.lastUpdated = text;\r\n\r\n//        timeoutId = $timeout(onTimeout, 1000);\r\n//    }\r\n\r\n//});","﻿namespace Submerged.Controllers {\r\n\r\n    export class LoginController {\r\n\r\n        loading: boolean;\r\n        vm: LoginController = this;\r\n        static $inject = ['mobileService', '$location', 'shared'];\r\n\r\n        constructor(private mobileService: Submerged.Services.IMobileService, private $location: ng.ILocationService,\r\n            private shared: Services.IShared) {\r\n\r\n            this.ensureLogin().then(\r\n                (() => {\r\n                    return this.loadSettings.bind(this)();\r\n                }).bind(this)\r\n                , this.errorHandler).then(\r\n                (() => {\r\n                    navigator.splashscreen.hide();\r\n                    this.redirect();\r\n                }).bind(this)\r\n                , this.errorHandler);\r\n        }\r\n\r\n        errorHandler(err): void {\r\n            navigator.splashscreen.hide();\r\n            console.log(\"Error occurred during login procedure: \" + err);\r\n        }        \r\n\r\n        ensureLogin(): ng.IPromise<{}> {\r\n            console.log(\"logincontroller.ensureLogin\");\r\n            return this.mobileService.login(true);\r\n        }\r\n\r\n        loadSettings(): ng.IPromise<{}> {\r\n            console.log(\"logincontroller.loadSettings\");\r\n            return this.shared.loadSettingsFromCloud(this.mobileService);\r\n        }\r\n\r\n        redirect(): void {\r\n            console.log('MAIN logged in, changing path');\r\n            this.$location.path(\"/live\");\r\n            this.loading = false;\r\n        }\r\n\r\n        login(): void {\r\n            this.mobileService.login();\r\n        }\r\n    }\r\n\r\n    angular.module(\"ngapp\").controller(\"LoginContoller\", LoginController);\r\n}\r\n\r\n//angular.module(\"ngapp\").controller(\"LoginContoller\", function (shared, mobileService, $scope, $location) {\r\n//    var vm = this;\r\n\r\n//    vm.loading = true;\r\n//    vm.login = function () {\r\n//        mobileService.login();\r\n//    }\r\n\r\n//    vm.init = function () {\r\n\r\n//    }\r\n\r\n//    vm.init();\r\n//});\r\n","﻿\"use strict\";\r\n\r\nnamespace Submerged.Controllers {\r\n\r\n    export class MainController {\r\n    }\r\n\r\n    angular.module(\"ngapp\").controller(\"MainController\", MainController);\r\n\r\n}","﻿namespace Submerged.Controllers {\r\n\r\n    export class SettingsController {\r\n        loading: boolean = true;\r\n        saving: boolean = false;\r\n\r\n        sensors: any[];\r\n        indexedRules = [];\r\n\r\n        deviceId: string;\r\n\r\n        constructor(private shared: Services.IShared, private mobileService: Services.IMobileService, private fileService: Services.IFileService,\r\n            private $scope: ng.IRootScopeService, private $location: ng.ILocationService, private $mdToast: ng.material.IToastService) {\r\n\r\n            this.deviceId = shared.settings.getDeviceId();\r\n\r\n            var apiUrl = \"sensors?deviceId=\" + this.deviceId;\r\n            mobileService.invokeApi(apiUrl, {\r\n                body: null,\r\n                method: \"post\"\r\n            }, ((error, success) => {\r\n                if (error) {\r\n                    // do nothing\r\n                    console.log(\"Error calling /data/sensors to the sensor configuration: \" + error);\r\n                }\r\n                else {\r\n                    this.processData(success.result);      // process the last known data for display\r\n                }\r\n            }).bind(this));\r\n        }\r\n\r\n        processData(sensors: Models.SensorRuleModel[]): void {\r\n\r\n            for (var sensor of sensors) {\r\n                switch (sensor.sensorType) {\r\n                    case \"temperature\":\r\n                        sensor.minimumValue = 10;\r\n                        sensor.maximumValue = 40;\r\n                        sensor.step = 1;\r\n                        break;\r\n                    case \"pH\":\r\n                        sensor.minimumValue = 5.5;\r\n                        sensor.maximumValue = 8;\r\n                        sensor.step = 0.1;\r\n                        break;\r\n                }\r\n            }\r\n\r\n            this.sensors = sensors;\r\n            this.loading = false;\r\n            this.$scope.$apply();\r\n        }\r\n\r\n        showSimpleToast(text: string): void {\r\n            this.$mdToast.show(\r\n                this.$mdToast.simple()\r\n                    .textContent(text)\r\n                    .position(\"top right\")\r\n                    .hideDelay(3000)\r\n            );\r\n        }\r\n\r\n        save(): void {\r\n            this.saving = true;\r\n\r\n            this.shared.settings.subscription.sensors = this.sensors;\r\n            this.shared.save();\r\n\r\n            var apiUrl = \"sensors/save?deviceId=\" + this.deviceId;\r\n            this.mobileService.invokeApi(apiUrl, {\r\n                body: this.shared.settings.subscription.sensors,\r\n                method: \"post\"\r\n            }, ((error, success) => {\r\n                this.saving = false;\r\n\r\n                if (error) {\r\n                    // do nothing\r\n                    this.showSimpleToast(\"Sorry, settings were not saved.\");\r\n                }\r\n            }).bind(this));\r\n        }\r\n    }\r\n\r\n    angular.module(\"ngapp\").controller(\"SettingsController\", SettingsController);\r\n}\r\n\r\n//\"use strict\";\r\n\r\n//angular.module(\"ngapp\").controller(\"SettingsController\", function (shared, mobileService, fileService, $scope, $location, $mdToast) {\r\n//    var vm = this;\r\n\r\n//    vm.loading = true;\r\n//    vm.saving = false;\r\n\r\n//    function processData(data) {\r\n//        vm.rules = data;\r\n//        vm.loading = false;\r\n//        $scope.$apply();\r\n//    }\r\n\r\n//    var indexedRules = [];\r\n\r\n//    vm.rulesToFilter = function () {\r\n//        indexedRules = [];\r\n//        return vm.rules;\r\n//    }\r\n\r\n//    vm.groupRules = function (rule) {\r\n//        var ruleIsNew = indexedRules.indexOf(rule.name) == -1;\r\n//        if (ruleIsNew) {\r\n//            indexedRules.push(rule.name);\r\n//        }\r\n//        return ruleIsNew;\r\n//    }\r\n\r\n//    var showSimpleToast = function (text) {\r\n//        $mdToast.show(\r\n//            $mdToast.simple()\r\n//                .textContent(text)\r\n//                .position(\"top right\")\r\n//                .hideDelay(3000)\r\n//        );\r\n//    };\r\n\r\n//    vm.save = function () {\r\n//        vm.saving = true;\r\n\r\n//        var settings = shared.settings;\r\n//        settings.rules = vm.rules;\r\n//        settings.save();\r\n\r\n//        var apiUrl = \"rules/save?deviceId=\" + shared.deviceInfo.deviceId;\r\n//        mobileService.invokeApi(apiUrl, {\r\n//            body: settings.rules,\r\n//            method: \"post\"\r\n//        }, function (error, success) {\r\n//            vm.saving = false;\r\n\r\n//            if (error) {\r\n//                // do nothing\r\n//                showSimpleToast(\"Sorry, settings were not saved.\");\r\n//            }\r\n//        });\r\n//    }\r\n\r\n//    function init() {\r\n\r\n//        var apiUrl = \"rules?deviceId=\" + shared.deviceInfo.deviceId;\r\n//        mobileService.invokeApi(apiUrl, {\r\n//            body: null,\r\n//            method: \"post\"\r\n//        }, function (error, success) {\r\n//            if (error) {\r\n//                // do nothing\r\n//                console.log(\"Error calling /rules to get device rules: \" + error);\r\n//            }\r\n//            else {\r\n//                processData(success.result);      // process the last known data for display\r\n//            }\r\n//        });\r\n//    }\r\n\r\n//    init();\r\n//});\r\n"]}